#!/usr/bin/env bash
# Bash script to configure Nginx redirection

# Backup default Nginx configuration file
cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default_backup

# Define the redirection configuration
REDIRECT_CONF="/etc/nginx/sites-available/redirect_me"

# Create a new Nginx configuration file for redirection
echo "server {" > $REDIRECT_CONF
echo "    listen 80;" >> $REDIRECT_CONF
echo "    server_name _;" >> $REDIRECT_CONF
echo "    return 301 https://www.example.com/new-page;" >> $REDIRECT_CONF
echo "}" >> $REDIRECT_CONF

# Enable the redirection configuration by creating a symbolic link
ln -s $REDIRECT_CONF /etc/nginx/sites-enabled/redirect_me

# Test Nginx configuration
nginx -t

# Reload Nginx to apply changes
service nginx reload

# Clean up backup file
rm /etc/nginx/sites-available/default_backup

echo "Redirection configured successfully."
